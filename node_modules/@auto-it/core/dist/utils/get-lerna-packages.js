"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const exec_promise_1 = tslib_1.__importDefault(require("./exec-promise"));
/** Get all of the packages in the lerna monorepo */
async function getLernaPackages() {
    const packages = [];
    const response = await exec_promise_1.default("npx", ["lerna", "ls", "-pla"]);
    response.split("\n").forEach((packageInfo) => {
        const [packagePath, name, version, isPrivate] = packageInfo.split(":");
        if (version !== "MISSING" && isPrivate !== "PRIVATE") {
            packages.push({ path: packagePath, name, version });
        }
    });
    return packages;
}
exports.default = getLernaPackages;
//# sourceMappingURL=get-lerna-packages.js.map